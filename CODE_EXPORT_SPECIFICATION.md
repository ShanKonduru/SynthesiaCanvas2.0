# SynthesiaCanvas 2.0 - Code Export & Generation Specification

## ğŸ”“ ZERO VENDOR LOCK-IN: The Game Changer

### Vision

Unlike competing platforms (Base44, Replit, Lovable, and other no-code tools) that trap your designs in their ecosystem, **SynthesiaCanvas exports fully functional, production-ready code** that you own, control, and can deploy anywhere.

## ğŸ¯ Core Principle

**"Your Design, Your Code, Your Freedom"**

Every visual design created in SynthesiaCanvas can be exported as:
- Complete Python source code
- Production-ready Docker configurations
- Standalone executables
- Zero dependencies on SynthesiaCanvas platform

---

## ğŸ“¦ Export Formats & Outputs

### 1. Python Code Export (Primary)

#### Generated Project Structure

```
my_agentic_system/
â”œâ”€â”€ README.md                           # Auto-generated setup instructions
â”œâ”€â”€ requirements.txt                    # All Python dependencies
â”œâ”€â”€ .env.example                        # Environment variable template
â”œâ”€â”€ docker-compose.yml                  # Container orchestration
â”œâ”€â”€ Dockerfile                          # Container image definition
â”œâ”€â”€ setup.py                            # Python package setup
â”œâ”€â”€ .gitignore                          # Git ignore patterns
â”œâ”€â”€ pytest.ini                          # Test configuration
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_agent.py                   # Base agent class
â”‚   â”œâ”€â”€ research_agent.py               # Generated agent 1
â”‚   â”œâ”€â”€ writer_agent.py                 # Generated agent 2
â”‚   â””â”€â”€ reviewer_agent.py               # Generated agent 3
â”œâ”€â”€ orchestration/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ workflow.py                     # Main workflow orchestration
â”‚   â”œâ”€â”€ state_manager.py                # State management
â”‚   â””â”€â”€ message_handler.py              # Inter-agent communication
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ web_search.py                   # Tool implementations
â”‚   â”œâ”€â”€ file_handler.py
â”‚   â””â”€â”€ api_client.py
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py                     # Configuration management
â”‚   â””â”€â”€ prompts.py                      # Prompt templates
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_agents.py                  # Agent unit tests
â”‚   â”œâ”€â”€ test_workflow.py                # Workflow integration tests
â”‚   â””â”€â”€ test_tools.py                   # Tool tests
â””â”€â”€ scripts/
    â”œâ”€â”€ run_local.py                    # Local execution script
    â”œâ”€â”€ run_docker.py                   # Docker execution script
    â””â”€â”€ validate_setup.py               # Setup validation
```

---

## ğŸ¨ Framework Support

### Option 1: AutoGen Framework

**Generated Code Structure:**

```python
# agents/research_agent.py
from autogen import AssistantAgent, UserProxyAgent
import os

class ResearchAgent:
    """
    Research Agent - Searches and analyzes information
    Generated by SynthesiaCanvas 2.0
    """
    
    def __init__(self, config: dict):
        self.config = config
        self.agent = AssistantAgent(
            name="researcher",
            system_message="""You are a research specialist...
            [PROMPT FROM CANVAS DESIGN]
            """,
            llm_config={
                "config_list": [{
                    "model": config.get("model", "gpt-4"),
                    "api_key": os.getenv("OPENAI_API_KEY")
                }],
                "temperature": config.get("temperature", 0.7)
            }
        )
    
    def execute(self, task: str, context: dict = None):
        """Execute research task"""
        # Generated from canvas connections
        return self.agent.generate_reply(
            messages=[{"role": "user", "content": task}],
            sender=None
        )

# orchestration/workflow.py
from autogen import GroupChat, GroupChatManager
from agents.research_agent import ResearchAgent
from agents.writer_agent import WriterAgent

class AgenticWorkflow:
    """
    Multi-Agent Workflow
    Generated by SynthesiaCanvas 2.0
    Canvas ID: ABC123
    """
    
    def __init__(self, config: dict):
        # Initialize agents (from canvas design)
        self.researcher = ResearchAgent(config["researcher"])
        self.writer = WriterAgent(config["writer"])
        
        # Create group chat (from canvas connections)
        self.agents = [
            self.researcher.agent,
            self.writer.agent
        ]
        
        self.group_chat = GroupChat(
            agents=self.agents,
            messages=[],
            max_round=config.get("max_rounds", 10)
        )
        
        self.manager = GroupChatManager(
            groupchat=self.group_chat,
            llm_config=config["manager_config"]
        )
    
    def run(self, initial_message: str):
        """Execute the complete workflow"""
        # Workflow logic from canvas
        result = self.researcher.agent.initiate_chat(
            self.manager,
            message=initial_message
        )
        return result
```

### Option 2: LangChain/LangGraph Framework

**Generated Code Structure:**

```python
# agents/research_agent.py
from langchain.agents import AgentExecutor, create_openai_functions_agent
from langchain_openai import ChatOpenAI
from langchain.prompts import ChatPromptTemplate
from langchain.tools import Tool

class ResearchAgent:
    """
    Research Agent - LangChain Implementation
    Generated by SynthesiaCanvas 2.0
    """
    
    def __init__(self, config: dict):
        self.llm = ChatOpenAI(
            model=config.get("model", "gpt-4"),
            temperature=config.get("temperature", 0.7)
        )
        
        # Prompt from canvas design
        self.prompt = ChatPromptTemplate.from_messages([
            ("system", """You are a research specialist...
            [PROMPT FROM CANVAS]
            """),
            ("user", "{input}"),
            ("assistant", "{agent_scratchpad}")
        ])
        
        # Tools from canvas
        self.tools = self._load_tools(config.get("tools", []))
        
        self.agent = create_openai_functions_agent(
            llm=self.llm,
            tools=self.tools,
            prompt=self.prompt
        )
        
        self.executor = AgentExecutor(
            agent=self.agent,
            tools=self.tools,
            verbose=True
        )
    
    def _load_tools(self, tool_configs: list):
        """Load tools based on canvas configuration"""
        tools = []
        for tool_config in tool_configs:
            # Generated based on canvas tool selections
            if tool_config["type"] == "web_search":
                from tools.web_search import web_search_tool
                tools.append(web_search_tool)
        return tools
    
    async def execute(self, task: str):
        """Execute research task"""
        result = await self.executor.ainvoke({"input": task})
        return result["output"]

# orchestration/workflow.py
from langgraph.graph import Graph, StateGraph
from typing import TypedDict, Annotated
import operator

class WorkflowState(TypedDict):
    """State management for workflow"""
    messages: Annotated[list, operator.add]
    research_results: str
    draft_content: str
    final_output: str

class AgenticWorkflow:
    """
    LangGraph Multi-Agent Workflow
    Generated by SynthesiaCanvas 2.0
    """
    
    def __init__(self, config: dict):
        from agents.research_agent import ResearchAgent
        from agents.writer_agent import WriterAgent
        
        self.researcher = ResearchAgent(config["researcher"])
        self.writer = WriterAgent(config["writer"])
        
        # Build graph from canvas connections
        self.graph = self._build_graph()
    
    def _build_graph(self):
        """Build workflow graph from canvas design"""
        workflow = StateGraph(WorkflowState)
        
        # Add nodes (from canvas agents)
        workflow.add_node("research", self._research_node)
        workflow.add_node("write", self._write_node)
        
        # Add edges (from canvas connections)
        workflow.add_edge("research", "write")
        workflow.set_entry_point("research")
        workflow.set_finish_point("write")
        
        return workflow.compile()
    
    async def _research_node(self, state: WorkflowState):
        """Research node logic"""
        result = await self.researcher.execute(
            state["messages"][-1]["content"]
        )
        return {"research_results": result}
    
    async def _write_node(self, state: WorkflowState):
        """Writer node logic"""
        result = await self.writer.execute(
            f"Write based on: {state['research_results']}"
        )
        return {"final_output": result}
    
    async def run(self, initial_message: str):
        """Execute workflow"""
        result = await self.graph.ainvoke({
            "messages": [{"role": "user", "content": initial_message}]
        })
        return result["final_output"]
```

### Option 3: CrewAI Framework

**Generated Code Structure:**

```python
# agents/research_agent.py
from crewai import Agent, Task, Crew
from tools.web_search import WebSearchTool

class ResearchAgent:
    """
    Research Agent - CrewAI Implementation
    Generated by SynthesiaCanvas 2.0
    """
    
    def __init__(self, config: dict):
        self.agent = Agent(
            role="Research Specialist",
            goal=config.get("goal", "Find and analyze information"),
            backstory="""[PROMPT FROM CANVAS]""",
            tools=[WebSearchTool()],
            verbose=True,
            llm_config={
                "model": config.get("model", "gpt-4"),
                "temperature": config.get("temperature", 0.7)
            }
        )
    
    def create_task(self, description: str):
        """Create a task for this agent"""
        return Task(
            description=description,
            agent=self.agent,
            expected_output="Research findings and analysis"
        )

# orchestration/workflow.py
from crewai import Crew, Process
from agents.research_agent import ResearchAgent
from agents.writer_agent import WriterAgent

class AgenticWorkflow:
    """
    CrewAI Multi-Agent Workflow
    Generated by SynthesiaCanvas 2.0
    """
    
    def __init__(self, config: dict):
        # Initialize agents
        self.researcher = ResearchAgent(config["researcher"])
        self.writer = WriterAgent(config["writer"])
        
        # Create crew from canvas design
        self.crew = Crew(
            agents=[
                self.researcher.agent,
                self.writer.agent
            ],
            process=Process.sequential,  # From canvas flow
            verbose=True
        )
    
    def run(self, topic: str):
        """Execute the crew workflow"""
        # Tasks from canvas connections
        research_task = self.researcher.create_task(
            f"Research information about: {topic}"
        )
        write_task = self.writer.create_task(
            f"Write a comprehensive article based on the research"
        )
        
        result = self.crew.kickoff(
            tasks=[research_task, write_task]
        )
        return result
```

---

## ğŸ³ Docker Configuration Export

### Generated docker-compose.yml

```yaml
# docker-compose.yml
# Generated by SynthesiaCanvas 2.0
# Canvas Design ID: ABC123

version: '3.8'

services:
  agentic-system:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: my_agentic_system
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
    ports:
      - "8000:8000"  # API port (if REST API generated)
    networks:
      - agent-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "python", "scripts/health_check.py"]
      interval: 30s
      timeout: 10s
      retries: 3

  redis:  # If state management required
    image: redis:alpine
    container_name: agent_redis
    ports:
      - "6379:6379"
    networks:
      - agent-network
    volumes:
      - redis-data:/data

  postgres:  # If database required
    image: postgres:15-alpine
    container_name: agent_postgres
    environment:
      - POSTGRES_DB=agents
      - POSTGRES_USER=agent_user
      - POSTGRES_PASSWORD=${DB_PASSWORD}
    ports:
      - "5432:5432"
    networks:
      - agent-network
    volumes:
      - postgres-data:/var/lib/postgresql/data

networks:
  agent-network:
    driver: bridge

volumes:
  redis-data:
  postgres-data:
```

### Generated Dockerfile

```dockerfile
# Dockerfile
# Generated by SynthesiaCanvas 2.0

FROM python:3.11-slim

WORKDIR /app

# Install system dependencies
RUN apt-get update && apt-get install -y \
    gcc \
    g++ \
    && rm -rf /var/lib/apt/lists/*

# Copy requirements
COPY requirements.txt .

# Install Python dependencies
RUN pip install --no-cache-dir -r requirements.txt

# Copy application code
COPY . .

# Create necessary directories
RUN mkdir -p data logs

# Run validation
RUN python scripts/validate_setup.py

# Set environment
ENV PYTHONUNBUFFERED=1

# Expose port if API enabled
EXPOSE 8000

# Run the application
CMD ["python", "scripts/run_docker.py"]
```

### Generated requirements.txt

```txt
# requirements.txt
# Generated by SynthesiaCanvas 2.0
# Based on selected agents and tools

# Core Framework (selected: autogen)
pyautogen==0.2.0

# Alternative frameworks (if selected)
# langchain==0.1.0
# langgraph==0.0.40
# crewai==0.1.0

# LLM Providers
openai==1.10.0
anthropic==0.18.0

# Tools and Utilities
requests==2.31.0
python-dotenv==1.0.0
pydantic==2.5.0
pydantic-settings==2.1.0

# State Management (if redis enabled)
redis==5.0.1

# Database (if postgres enabled)
psycopg2-binary==2.9.9
sqlalchemy==2.0.25

# Monitoring and Logging
loguru==0.7.2

# Testing
pytest==7.4.3
pytest-asyncio==0.21.1
pytest-cov==4.1.0

# Development
black==23.12.1
ruff==0.1.9
mypy==1.8.0
```

---

## ğŸ“‹ Generated Documentation

### README.md Template

```markdown
# My Agentic System

> Generated by SynthesiaCanvas 2.0
> Canvas Design ID: ABC123
> Export Date: 2025-01-15

## Overview

This multi-agent system was designed visually using SynthesiaCanvas and exported
as production-ready Python code. It consists of 3 agents working together to 
accomplish complex tasks.

## Architecture

```
[Visual diagram exported from canvas]
```

### Agents

1. **Research Agent** - Searches and analyzes information
2. **Writer Agent** - Creates content based on research
3. **Reviewer Agent** - Reviews and validates output

### Workflow

1. User provides input topic
2. Research Agent gathers information
3. Writer Agent creates draft
4. Reviewer Agent validates and refines
5. Final output returned

## Installation

### Prerequisites

- Python 3.10+
- Docker (optional, for containerized deployment)
- OpenAI API key

### Local Setup

```bash
# Clone or extract the exported code
cd my_agentic_system

# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Set up environment variables
cp .env.example .env
# Edit .env with your API keys

# Validate setup
python scripts/validate_setup.py
```

### Docker Setup

```bash
# Build and run with Docker Compose
docker-compose up -d

# Check logs
docker-compose logs -f

# Stop services
docker-compose down
```

## Usage

### Running Locally

```python
from orchestration.workflow import AgenticWorkflow
import yaml

# Load configuration
with open('config/settings.yaml') as f:
    config = yaml.safe_load(f)

# Create workflow
workflow = AgenticWorkflow(config)

# Execute
result = workflow.run("Research and write about AI trends in 2025")
print(result)
```

### Running as API

```bash
# Start API server (if enabled in canvas)
python scripts/run_api.py
```

### Running Tests

```bash
# Run all tests
pytest

# Run with coverage
pytest --cov=agents --cov=orchestration

# Run specific test
pytest tests/test_workflow.py
```

## Configuration

Edit `config/settings.py` or `config/settings.yaml` to customize:

- Agent models (GPT-4, Claude, etc.)
- Temperature and other LLM parameters
- Tool configurations
- Workflow parameters

## Customization

This code is **yours to modify**. Common customizations:

- Add new agents in `agents/` directory
- Modify prompts in `config/prompts.py`
- Add new tools in `tools/` directory
- Adjust workflow logic in `orchestration/workflow.py`

## Deployment

### Deploy to Cloud

See `docs/deployment.md` for detailed instructions for:

- AWS (ECS, Lambda)
- Azure (Container Instances, Functions)
- Google Cloud (Cloud Run, Functions)
- Kubernetes

### Scaling

For production workloads, consider:

- Adding Redis for state management
- Using PostgreSQL for persistence
- Implementing rate limiting
- Adding monitoring (Prometheus, Grafana)

## Troubleshooting

See `docs/troubleshooting.md` for common issues and solutions.

## License

This code was generated by SynthesiaCanvas 2.0. You own 100% of this code and
can use, modify, and distribute it as you wish under your own license terms.

## Support

- Original Canvas Design: [Link to SynthesiaCanvas if saved]
- Documentation: See `docs/` directory
- Issues: Create issues in your repository

---

**Generated with â¤ï¸ by SynthesiaCanvas 2.0 - Zero Vendor Lock-in Platform**
```

---

## ğŸ”„ Export Workflow in SynthesiaCanvas UI

### User Flow

1. **Design Complete** - User finishes designing multi-agent system
2. **Export Button** - Clicks "Export Code" button in UI
3. **Framework Selection** - Chooses framework:
   - AutoGen (recommended for beginners)
   - LangChain/LangGraph (advanced workflows)
   - CrewAI (team-based agents)
   - Custom (minimal boilerplate)
4. **Configuration Options**:
   - Include Docker files? âœ“
   - Include tests? âœ“
   - Include API wrapper? âœ“
   - Include CI/CD config? âœ“
   - Kubernetes manifests? (Enterprise tier)
5. **Generate** - System generates complete codebase
6. **Preview** - User can preview files before download
7. **Download** - Downloads as ZIP file
8. **Optional Cloud Sync** - Can push to GitHub/GitLab

### Generated Package Name

Format: `{canvas_name}_{timestamp}.zip`

Example: `customer_support_agent_2025_01_15.zip`

---

## ğŸ¯ Quality Assurance for Generated Code

### Validation Steps

1. **Syntax Check** - All Python files must be valid syntax
2. **Import Check** - All imports must be resolvable
3. **Type Check** - mypy validation on generated code
4. **Linting** - Ruff/Black formatting applied
5. **Test Generation** - Basic tests auto-generated
6. **Documentation** - Docstrings auto-generated
7. **Security Scan** - Basic security checks (no hardcoded secrets)

### Testing Generated Code

Before allowing download, system runs:

```bash
# Automated validation
python -m py_compile agents/*.py  # Syntax check
mypy agents/  # Type checking
pytest tests/ --collect-only  # Test discovery
docker-compose config  # Docker validation
```

---

## ğŸ“Š Success Metrics

### For Users

- **Export Success Rate**: >95% of exports work on first try
- **Modification Rate**: >60% of users modify generated code (proves it's usable)
- **Deployment Rate**: >40% of exports actually get deployed
- **Code Quality**: >90% pass standard Python linters

### For Platform

- **Competitive Advantage**: #1 feature differentiating from competitors
- **User Retention**: 3x higher for users who export code
- **Word of Mouth**: Main marketing point
- **Enterprise Sales**: Key selling point for enterprise customers

---

## ğŸš€ Future Enhancements (Post-MVP)

### Phase 4+ Features

1. **More Frameworks**
   - Add Haystack support
   - Add DSPy support
   - Custom framework templates

2. **More Languages**
   - Generate TypeScript/JavaScript code
   - Generate Go code
   - Generate Rust code

3. **Advanced Exports**
   - Kubernetes Helm charts
   - Terraform infrastructure
   - CloudFormation templates
   - Azure ARM templates

4. **IDE Integration**
   - VS Code extension for import
   - PyCharm plugin
   - GitHub Codespaces template

5. **Continuous Sync**
   - Two-way sync with Git repository
   - Import existing code back to canvas
   - Diff visualization

---

## ğŸ’¡ Key Differentiator Summary

| Feature | SynthesiaCanvas | Base44 | Replit | Lovable | Other No-Code |
|---------|----------------|--------|--------|---------|---------------|
| **Export Full Code** | âœ… YES | âŒ NO | âš ï¸ Limited | âŒ NO | âŒ NO |
| **Code Ownership** | âœ… 100% | âŒ Vendor-locked | âš ï¸ Partial | âŒ Vendor-locked | âŒ Vendor-locked |
| **Framework Choice** | âœ… Multiple | N/A | âš ï¸ Limited | N/A | N/A |
| **Docker Export** | âœ… YES | âŒ NO | âš ï¸ Basic | âŒ NO | âŒ NO |
| **Modify & Deploy** | âœ… Anywhere | âŒ Only on platform | âš ï¸ Limited | âŒ Only on platform | âŒ Only on platform |
| **No Platform Fee** | âœ… After export | âŒ Always required | âŒ Always required | âŒ Always required | âŒ Always required |

**Bottom Line**: With SynthesiaCanvas, you can design visually, then take your code and run. Forever. Anywhere. No strings attached.

---

**Document Version**: 1.0  
**Last Updated**: November 5, 2025  
**Status**: Specification for Phase 2 Implementation
